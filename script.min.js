"use strict";const deadlineDate=document.querySelector(".deadline__date"),daedlineTime=document.querySelector(".deadline__time"),setDeadlineBtn=document.querySelector(".deadline__btn"),timer=document.querySelector(".timer"),days=document.querySelector(".days"),hours=document.querySelector(".hours"),minutes=document.querySelector(".minutes"),seconds=document.querySelector(".seconds");let timeInterval,deadline=[];function inputError(e){setDeadlineBtn.innerText=e,setTimeout(()=>setDeadlineBtn.innerText="SET DATE!",3e3),setDeadlineBtn.classList.add("deadline__btn--error"),setTimeout(()=>setDeadlineBtn.classList.remove("deadline__btn--error"),3e3)}function inputSuccess(e,t){pushToStorage(deadline={deadDate:e,deadTime:t}),deadlineDate.value="",daedlineTime.value="",setDeadlineBtn.innerText="data received",setTimeout(()=>setDeadlineBtn.innerText="set timer",3e3),setDeadlineBtn.classList.remove("deadline__btn--error")}function pushToStorage(e){localStorage.setItem("deadline",JSON.stringify(e)),checkStorage()}function checkStorage(){localStorage.getItem("deadline")&&settimer((deadline=JSON.parse(localStorage.getItem("deadline"))).deadDate,deadline.deadTime)}function getTime(e){const t=e-Date.parse(new Date);return{total:t,days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/1e3/60%60),seconds:Math.floor(t/1e3%60)}}function getZero(e){return e>=0&&e<10?`0${e}`:e}function settimer(e,t){let n=Date.parse(e),a=0;0!=t&&NaN!=t&&""!=t&&(a=function(e){let t=e.split(":"),n=+t[0],a=+t[1];return 36e5*n+6e4*a}(t));let r=n+a;function i(){const e=getTime(r);days.innerText=getZero(e.days),hours.innerText=getZero(e.hours),minutes.innerText=getZero(e.minutes),seconds.innerText=getZero(e.seconds),e.total<=0&&(clearInterval(timeInterval),timer.innerText=`your timer ${deadline.deadDate} is ... dead`)}timeInterval=setInterval(i,1e3),i()}setDeadlineBtn.addEventListener("click",e=>{e.preventDefault,deadlineDate.value?Date.parse(deadlineDate.value)<=(new Date).getTime()?inputError("enter a future date"):deadlineDate.value&&!daedlineTime.value?(clearInterval(timeInterval),inputSuccess(deadlineDate.value,"0")):(clearInterval(timeInterval),inputSuccess(deadlineDate.value,daedlineTime.value)):inputError("enter a date!")}),checkStorage();